(this["webpackJsonpblog-admin"]=this["webpackJsonpblog-admin"]||[]).push([[0],{105:function(e,t,a){},106:function(e,t,a){"use strict";a.r(t);var n=a(1),c=a(0),r=a.n(c),s=a(11),l=a(22),o=a.n(l),i=(a(80),a(81),a(9)),j=(a(82),a(110)),b=(a(83),a(115)),d=a(116),u=a(108),O=a(15),h=a(8),g=a.n(h),p=a(6),x=a(16),m=a(65),f=a.n(m),y=window.localStorage.getItem("token"),v=f.a.create({baseURL:"http://localhost:2000/api",headers:{Authorization:y?"Bearer ".concat(y):""}}),E="LOGIN_REQUEST",S="LOGIN_SUCCESS",C="LOGIN_FAILURE",_="LOGOUT_REQUEST",T="LOGOUT_SUCCESS",k="USER_REGISTER_REQUEST",w="USER_REGISTER_SUCCESS",L="USER_REGISTER_FAILURE",I="GET_ALL_BLOG_REQUEST",B="GET_ALL_BLOG_SUCCESS",N="GET_ALL_BLOG_FAILURE",U="ADD_NEW_BLOG_REQUEST",G="ADD_NEW_BLOG_SUCCESS",R="ADD_NEW_BLOG_FAILURE",A="UPDATE_BLOG_REQUEST",D="UPDATE_BLOG_SUCCESS",F="UPDATE_BLOG_FAILURE",P="DELETE_BLOG_REQUEST",Q="DELETE_BLOG_SUCCESS",W="DELETE_BLOG_FAILURE",z="DELETE_BLOG_BY_ID_REQUEST",H="DELETE_BLOG_BY_ID_SUCCESS",J="DELETE_BLOG_BY_ID_FAILURE",M=function(){return function(){var e=Object(x.a)(g.a.mark((function e(t){var a,n;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t({type:I}),e.next=3,v.get("/blog/getBlogs");case 3:200===(a=e.sent).status?(n=a.data.blogLists,t({type:B,payload:{blog:n}})):t({type:N,payload:{error:a.data.error}});case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},Y=function(e){var t=Object(s.c)((function(e){return e.auth})),a=Object(s.b)(),c=function(){a(function(){var e=Object(x.a)(g.a.mark((function e(t){var a;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t({type:_}),e.next=3,v.post("/admin/signout");case 3:200===(a=e.sent).status?(localStorage.clear(),t({type:T})):400===a.status&&t({type:C});case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())};return Object(n.jsx)(n.Fragment,{children:Object(n.jsx)(d.a,{collapseOnSelect:!0,fixed:"top",expand:"lg",bg:"dark",variant:"dark",style:{zIndex:1},children:Object(n.jsxs)(u.a,{fluid:!0,children:[Object(n.jsx)(O.b,{className:"navbar-brand",to:"/",children:"Blog admin app"}),Object(n.jsx)(d.a.Toggle,{"aria-controls":"responsive-navbar-nav"}),Object(n.jsxs)(d.a.Collapse,{id:"responsive-navbar-nav",children:[Object(n.jsx)(b.a,{className:"mr-auto"}),t.authenticate?Object(n.jsx)(b.a,{children:Object(n.jsx)("span",{style:{cursor:"pointer"},to:"/signup",className:"nav-link",onClick:c,children:"Signout"})}):Object(n.jsx)(b.a,{children:Object(n.jsx)("li",{className:"nav-item",children:Object(n.jsx)(O.c,{to:"/signin",className:"nav-link",children:"Signin"})})})]})]})})})},V=a(109),q=a(66),K=function(e){return Object(n.jsxs)(n.Fragment,{children:[Object(n.jsx)(Y,{}),e.sidebar?Object(n.jsx)(u.a,{fluid:!0,children:Object(n.jsxs)(V.a,{children:[Object(n.jsx)(q.a,{md:2,className:"sidebar",children:Object(n.jsxs)("ul",{children:[Object(n.jsx)("li",{children:Object(n.jsx)(O.c,{to:"/",exact:!0,children:" Home"})}),Object(n.jsx)("li",{children:Object(n.jsx)(O.c,{to:"/blogs",children:" Blogs"})}),Object(n.jsx)("li",{children:Object(n.jsx)(O.c,{to:"/comments",children:" Comments"})})]})}),Object(n.jsx)(q.a,{md:10,style:{marginLeft:"auto",paddingTop:"60px"},children:e.children})]})}):e.children]})},X=function(e){return Object(n.jsx)(K,{sidebar:!0,children:Object(n.jsxs)(j.a,{style:{textAlign:"center",backgroundColor:"#fff"},children:[Object(n.jsx)("h1",{children:"Welcome to admin Dashboard"}),Object(n.jsx)("p",{children:"It is a long established fact that a reader will be distracted by the readable content of a page when looking at its layout. The point of using Lorem Ipsum is that it has a more-or-less normal distribution of letters, as opposed to using 'Content here, content here', making it look like readable English. Many desktop publishing packages and web page editors now use Lorem Ipsum as their default model text, and a search for 'lorem ipsum' will uncover many web sites still in their infancy. "})]})})},Z=a(12),$=a(114),ee=a(111),te=function(e){return Object(n.jsxs)($.a.Group,{children:[e.label&&Object(n.jsx)($.a.Label,{children:e.label}),Object(n.jsx)($.a.Control,{type:e.type,placeholder:e.placeholder,value:e.value,onChange:e.onChange}),Object(n.jsx)($.a.Text,{className:"text-muted",children:e.error})]})},ae=function(e){var t=Object(c.useState)(""),a=Object(Z.a)(t,2),r=a[0],l=a[1],o=Object(c.useState)(""),j=Object(Z.a)(o,2),b=j[0],d=j[1],O=Object(s.c)((function(e){return e.auth})),h=Object(s.b)();return O.authenticate?Object(n.jsx)(i.a,{to:"/"}):Object(n.jsxs)(K,{children:[Object(n.jsx)(u.a,{children:Object(n.jsx)(V.a,{style:{marginTop:"100px"},children:Object(n.jsx)(q.a,{md:{span:6,offset:3},children:Object(n.jsxs)($.a,{onSubmit:function(e){e.preventDefault(),h(function(e){return function(){var t=Object(x.a)(g.a.mark((function t(a){var n,c,r,s,l,o;return g.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a({type:E}),t.next=3,v.post("/admin/signin",Object(p.a)({},e));case 3:201===(n=t.sent).status&&(c=n.data,r=c.token,s=c.user,l=c.message,localStorage.setItem("token",r),localStorage.setItem("user",JSON.stringify(s)),a({type:S,payload:{token:r,user:s,message:l}})),400===n.status&&(o=n.data.message,a({type:C,payload:{message:o}}));case 6:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()}({email:r,password:b}))},children:[Object(n.jsx)(te,{label:"Email",type:"email",placeholder:"Enter Valid Email",value:r,onChange:function(e){return l(e.target.value)}}),Object(n.jsx)(te,{label:"Password",type:"password",placeholder:"Enter Password",value:b,onChange:function(e){return d(e.target.value)}}),Object(n.jsx)(ee.a,{variant:"primary",type:"submit",children:"Signin"})]})})})}),Object(n.jsxs)("div",{style:{textAlign:"center"},children:[Object(n.jsxs)("p",{children:["email: ",Object(n.jsx)("span",{style:{fontWeight:"bold"},children:"admin@gmail.com"})]}),Object(n.jsxs)("p",{children:["password: ",Object(n.jsx)("span",{style:{fontWeight:"bold"},children:"123456"})]})]})]})},ne=a(117),ce=function(e){var t=Object(c.useState)(""),a=Object(Z.a)(t,2),r=a[0],l=a[1],o=Object(c.useState)(""),j=Object(Z.a)(o,2),b=j[0],d=j[1],O=Object(c.useState)(""),h=Object(Z.a)(O,2),m=h[0],f=h[1],y=Object(c.useState)(""),E=Object(Z.a)(y,2),S=E[0],C=E[1],_=Object(s.c)((function(e){return e.auth})),T=Object(s.c)((function(e){return e.user})),I=Object(s.b)(),B=Object(c.useState)(!0),N=Object(Z.a)(B,2),U=N[0],G=N[1];if(_.authenticate)return Object(n.jsx)(i.a,{to:"/"});return Object(n.jsx)(K,{children:Object(n.jsxs)(u.a,{children:[T.message?function(){if(U)return Object(n.jsx)(V.a,{children:Object(n.jsx)(q.a,{xs:6,md:{span:6,offset:3},children:Object(n.jsxs)(ne.a,{onClose:function(){return G(!1)},show:U,delay:3e3,autohide:!0,children:[Object(n.jsx)(ne.a.Header,{children:Object(n.jsx)("strong",{className:"mr-auto",children:"Notification"})}),Object(n.jsx)(ne.a.Body,{children:T.message})]})})})}():"",Object(n.jsx)(V.a,{style:{marginTop:"100px"},children:Object(n.jsx)(q.a,{md:{span:6,offset:3},children:Object(n.jsxs)($.a,{onSubmit:function(e){e.preventDefault(),I(function(e){return console.log(e),function(){var t=Object(x.a)(g.a.mark((function t(a){var n,c;return g.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a({type:k}),t.next=3,v.post("/admin/signup",Object(p.a)({},e));case 3:201===(n=t.sent).status&&(c=n.data.message,a({type:w,payload:{message:c}})),400===n.status&&a({type:L,payload:{error:n.data.error}});case 6:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()}({firstName:r,lastName:b,email:m,password:S}))},children:[Object(n.jsxs)(V.a,{children:[Object(n.jsx)(q.a,{children:Object(n.jsx)(te,{label:"First Name",type:"text",placeholder:"Enter First Name",onChange:function(e){return l(e.target.value)},value:r})}),Object(n.jsx)(q.a,{children:Object(n.jsx)(te,{label:"Last Name",type:"text",placeholder:"Enter Last Name",onChange:function(e){return d(e.target.value)},value:b})})]}),Object(n.jsx)(te,{label:"Email",type:"email",placeholder:"Enter Valid Email",onChange:function(e){return f(e.target.value)},value:m}),Object(n.jsx)(te,{label:"Password",type:"password",placeholder:"Enter Password",onChange:function(e){return C(e.target.value)},value:S}),Object(n.jsx)(ee.a,{variant:"primary",type:"submit",children:"Signup"})]})})})]})})},re=a(70),se=function(e){var t=e.component,a=Object(re.a)(e,["component"]);return Object(n.jsx)(i.b,Object(p.a)(Object(p.a)({},a),{},{component:function(e){return window.localStorage.getItem("token")?Object(n.jsx)(t,Object(p.a)({},e)):Object(n.jsx)(i.a,{to:"/signin"})}}))},le=(a(105),a(112)),oe=a(113),ie=function(e){return Object(n.jsxs)(oe.a,{size:e.size,show:e.show,onHide:e.handleClose,children:[Object(n.jsx)(oe.a.Header,{closeButton:!0,children:Object(n.jsx)(oe.a.Title,{children:e.modalTitle})}),Object(n.jsx)(oe.a.Body,{children:e.children}),Object(n.jsx)(oe.a.Footer,{children:e.buttons?e.buttons.map((function(e,t){return Object(n.jsx)(ee.a,{variant:e.color,onClick:e.onClick,children:e.label},t)})):Object(n.jsx)(ee.a,Object(p.a)(Object(p.a)({variant:"primary",className:"btn-sm"},e),{},{onClick:e.onSubmit,children:"Save"}))})]})},je=function(e){return Object(n.jsxs)($.a.Group,{children:[e.label&&Object(n.jsx)($.a.Label,{children:e.label}),Object(n.jsx)($.a.Control,{as:"textarea",rows:3,type:e.type,placeholder:e.placeholder,value:e.value,onChange:e.onChange}),Object(n.jsx)($.a.Text,{className:"text-muted",children:e.error})]})},be=function(e){var t=Object(s.c)((function(e){return e.blog}));console.log(t);var a=Object(s.b)(),r=Object(c.useState)(!1),l=Object(Z.a)(r,2),o=l[0],i=l[1],j=Object(c.useState)(!1),b=Object(Z.a)(j,2),d=b[0],O=b[1],h=Object(c.useState)(""),p=Object(Z.a)(h,2),m=p[0],f=p[1],y=Object(c.useState)(""),E=Object(Z.a)(y,2),S=E[0],C=E[1],_=Object(c.useState)(""),T=Object(Z.a)(_,2),k=T[0],w=T[1],L=Object(c.useState)(""),I=Object(Z.a)(L,2),B=I[0],N=I[1],A=Object(c.useState)(!1),D=Object(Z.a)(A,2),F=(D[0],D[1],Object(c.useState)(null)),P=Object(Z.a)(F,2),Q=P[0],W=P[1],Y=function(){O(!1)},X=function(){var e=new FormData;e.append("blogCategory",m),e.append("blogTitle",S),e.append("blogText",B),e.append("blogImage",k),console.log(e),console.log(m,S,B,k),a(function(e){return function(){var t=Object(x.a)(g.a.mark((function t(a){var n;return g.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a({type:U}),t.next=3,v.post("/blog/create",e);case 3:201===(n=t.sent).status?a({type:G,payload:{blog:n.data.blog}}):a({type:R,payload:{error:n.data.error}});case 5:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()}(e)),f(""),C(""),N(""),w(""),i(!1)},$=function(e){w(e.target.files[0])};return Object(n.jsxs)(K,{sidebar:!0,children:[Object(n.jsxs)(u.a,{children:[Object(n.jsx)(V.a,{children:Object(n.jsx)(q.a,{md:12,children:Object(n.jsxs)("div",{style:{display:"flex",justifyContent:"space-between"},children:[Object(n.jsx)("h3",{children:"Our Blogs"}),Object(n.jsx)("button",{onClick:function(){i(!0)},children:"Add"})]})})}),Object(n.jsx)(V.a,{children:Object(n.jsx)(q.a,{children:Object(n.jsxs)(le.a,{responsive:"sm",style:{fontSize:"12px"},children:[Object(n.jsx)("thead",{children:Object(n.jsxs)("tr",{children:[Object(n.jsx)("th",{children:"#"}),Object(n.jsx)("th",{children:"Category"}),Object(n.jsx)("th",{children:"Title"}),Object(n.jsx)("th",{children:"Image"}),Object(n.jsx)("th",{children:"Actions"})]})}),Object(n.jsx)("tbody",{children:t.blogs.length>0?t.blogs.map((function(e,t){return Object(n.jsxs)("tr",{children:[Object(n.jsx)("td",{children:"1"}),Object(n.jsx)("td",{children:e.blogCategory}),Object(n.jsx)("td",{children:e.blogTitle}),Object(n.jsx)("td",{children:Object(n.jsx)("div",{children:Object(n.jsx)("img",{style:{width:"100px",height:"75px"},src:e.blogImage,alt:e.blogImage})})}),Object(n.jsx)("td",{children:Object(n.jsxs)("div",{style:{display:"flex"},children:[Object(n.jsx)("button",{onClick:function(){return function(e){W(e),O(!0),console.log(e)}(e)},children:"Info"}),Object(n.jsx)("button",{onClick:function(){var t={blogId:e._id};a(function(e){return function(){var t=Object(x.a)(g.a.mark((function t(a){var n,c;return g.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,a({type:z}),t.next=4,v.delete("/blog/deleteBlogById",{data:{payload:e}});case 4:202===(n=t.sent).status?(a({type:H}),a(M())):(c=n.data.error,a({type:J,payload:{error:c}})),t.next=11;break;case 8:t.prev=8,t.t0=t.catch(0),console.log(t.t0);case 11:case"end":return t.stop()}}),t,null,[[0,8]])})));return function(e){return t.apply(this,arguments)}}()}(t))},children:"delete"})]})})]},t)})):null})]})})})]}),Q?Object(n.jsx)(ie,{modalTitle:"BlogDetails",show:d,handleClose:function(){return O(!1)},onSubmit:Y,size:"lg",children:Object(n.jsxs)(V.a,{children:[Object(n.jsx)(q.a,{style:{display:"flex"},children:Object(n.jsx)("div",{className:"productImgContainer",children:Object(n.jsx)("img",{src:Q.blogImage})})}),Object(n.jsxs)(q.a,{md:12,children:[Object(n.jsx)("h2",{children:Q.blogTitle}),Object(n.jsx)("h6",{children:Q.blogCategory})]}),Object(n.jsx)(q.a,{md:12,children:Object(n.jsx)("div",{className:"div_style_row",children:Object(n.jsx)("p",{className:"value",children:Q.blogText})})})]})}):null,Object(n.jsxs)(ie,{modalTitle:"Add New Blog",show:o,handleClose:function(){return i(!1)},onSubmit:X,children:[Object(n.jsx)(te,{label:"Blog Category",value:m,onChange:function(e){return f(e.target.value)},placeholder:"Blog Category Name"}),Object(n.jsx)(te,{label:"Blog Title",value:S,onChange:function(e){return C(e.target.value)},placeholder:"Blog Title"}),Object(n.jsx)(je,{label:"Text",value:B,onChange:function(e){return N(e.target.value)},placeholder:"Blog Text"}),Object(n.jsx)(te,{label:"Blog Image",name:k,onChange:$,type:"file"})]})]})},de=function(e){return Object(n.jsx)(K,{sidebar:!0,children:Object(n.jsx)("h1",{children:"Comments"})})};var ue=function(){var e=Object(s.c)((function(e){return e.auth})),t=Object(s.b)();return Object(c.useEffect)((function(){e.authenticate||t(function(){var e=Object(x.a)(g.a.mark((function e(t){var a,n;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:(a=localStorage.getItem("token"))?(n=JSON.parse(localStorage.getItem("user")),t({type:S,payload:{token:a,user:n}})):t({type:C,payload:{error:"Failed to logedin"}});case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),e.authenticate&&t(function(){var e=Object(x.a)(g.a.mark((function e(t){var a,n;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,v.get("/initialdata");case 2:200===(a=e.sent).status&&(n=a.data.blogs,t({type:B,payload:{blogs:n}})),console.log(a);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())}),[e.authenticate]),Object(n.jsx)("div",{className:"App",children:Object(n.jsxs)(i.d,{children:[Object(n.jsx)(se,{path:"/",exact:!0,component:X}),Object(n.jsx)(se,{path:"/blogs",component:be}),Object(n.jsx)(se,{path:"/comments",component:de}),Object(n.jsx)(i.b,{path:"/signin",component:ae}),Object(n.jsx)(i.b,{path:"/signup",component:ce})]})})},Oe=function(e){e&&e instanceof Function&&a.e(3).then(a.bind(null,118)).then((function(t){var a=t.getCLS,n=t.getFID,c=t.getFCP,r=t.getLCP,s=t.getTTFB;a(e),n(e),c(e),r(e),s(e)}))},he=a(27),ge=a(67),pe=a(68),xe={token:null,user:{firstName:"",lastName:"",email:"",fullName:""},authenticate:!1,authenticating:!1,message:null,loading:"",error:""},me={error:null,loading:!1,loaded:!1,message:null},fe=a(69),ye=a(54),ve={blogs:[],loading:!1,error:""},Ee=Object(he.combineReducers)({auth:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:xe,t=arguments.length>1?arguments[1]:void 0;switch(console.log("ACTION",t),t.type){case E:e=Object(p.a)(Object(p.a)({},e),{},{authenticating:!0});break;case S:e=Object(p.a)(Object(p.a)({},e),{},{token:t.payload.token,user:t.payload.user,message:t.payload.message,authenticate:!0,authenticating:!1});break;case C:e=Object(p.a)(Object(p.a)({},e),{},{authenticate:!1,authenticating:!1,message:t.payload.message});break;case _:e=Object(p.a)(Object(p.a)({},e),{},{loading:!0});break;case T:e=Object(p.a)({},xe)}return e},user:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:me,t=arguments.length>1?arguments[1]:void 0;switch(console.log("ACTION",t),t.type){case k:e=Object(p.a)(Object(p.a)({},e),{},{loading:!1,loaded:!0});break;case w:e=Object(p.a)(Object(p.a)({},e),{},{loading:!0,loaded:!1,message:t.payload.message});break;case L:e={error:t.payload.error,loading:!1,loaded:!1}}return e},blog:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ve,t=arguments.length>1?arguments[1]:void 0,a=function e(t,a,n){var c=[];if(void 0==t)return[].concat(Object(ye.a)(a),[{_id:n._id,blogCategory:n.blogCategory,blogTitle:n.blogTitle,blogText:n.blogText,blogImage:n.blogImage,slug:n.slug}]);var r,s=Object(fe.a)(a);try{for(s.s();!(r=s.n()).done;){var l=r.value;l._id==t?c.push(Object(p.a)(Object(p.a)({},l),{},{children:l.children?e(t,[].concat(Object(ye.a)(l.children),[{_id:n._id,blogCategory:n.blogCategory,blogTitle:n.blogTitle,blogText:n.blogText,blogImage:n.blogImage,slug:n.slug}]),n):[]})):c.push(Object(p.a)(Object(p.a)({},l),{},{children:l.children?e(t,l.children,n):[]}))}}catch(o){s.e(o)}finally{s.f()}return c};switch(t.type){case I:e=Object(p.a)(Object(p.a)({},e),{},{loading:!0});break;case B:e=Object(p.a)(Object(p.a)({},e),{},{blogs:t.payload.blogs,loading:!1});break;case N:e=Object(p.a)(Object(p.a)({},e),{},{error:t.payload.error});break;case U:e=Object(p.a)(Object(p.a)({},e),{},{loading:!0});break;case G:var n=t.payload.blog,c=a(n.parentId,e.blogs,n);console.log(c),e=Object(p.a)(Object(p.a)({},e),{},{blogs:c,loading:!1});break;case R:e=Object(p.a)(Object(p.a)({},ve),{},{error:t.payload.error});break;case A:e=Object(p.a)(Object(p.a)({},e),{},{loading:!0});break;case D:e=Object(p.a)(Object(p.a)({},e),{},{loading:!1});break;case F:e=Object(p.a)(Object(p.a)({},e),{},{error:t.payload.error});break;case P:e=Object(p.a)(Object(p.a)({},e),{},{loading:!0});break;case Q:e=Object(p.a)(Object(p.a)({},e),{},{loading:!1});break;case W:e=Object(p.a)(Object(p.a)({},e),{},{error:t.payload.error})}return e}}),Se=Object(he.createStore)(Ee,Object(ge.composeWithDevTools)(Object(he.applyMiddleware)(pe.a)));window.store=Se,o.a.render(Object(n.jsx)(s.a,{store:Se,children:Object(n.jsx)(O.a,{children:Object(n.jsx)(r.a.StrictMode,{children:Object(n.jsx)(ue,{})})})}),document.getElementById("root")),Oe()},80:function(e,t,a){},81:function(e,t,a){},82:function(e,t,a){},83:function(e,t,a){}},[[106,1,2]]]);
//# sourceMappingURL=main.ea1344e1.chunk.js.map